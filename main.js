(()=>{"use strict";var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hi:()=>F,cM:()=>R,$f:()=>B});const t=document.querySelector(".cards__list"),r=document.querySelector("#card-modal"),s=r.querySelector(".modal__image"),n=r.querySelector(".modal__card-title"),i=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-modal"),a=document.querySelector(".profile__add-button"),l=document.querySelector("#cards-modal"),d=document.querySelector(".profile__title"),h=document.querySelector(".profile__subtitle"),c=o.querySelector(".form__input-name"),u=o.querySelector(".form__input-description"),_=(l.querySelector(".form__input-title"),l.querySelector(".form__input-link"),{inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}),m=o.querySelector(".form"),p=l.querySelector("#cards-form"),f=document.querySelector("#propic-form"),E=document.querySelector("#delete-form"),b=document.querySelector("#propic-modal"),v=document.querySelector(".profile__image-ed"),L=document.querySelector(".profile__image"),S=document.querySelector("#delete-modal");class y{constructor(e,t,r,s){let{handleDelete:n,handleLike:i,handleUnlike:o}=s;this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=r,this.id=e._id,this.isLiked=e.isLiked,this._handleDelete=n,this._handleLike=i,this._handleUnlike=o}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this.link,this._cardElement.querySelector(".card__image").alt=`photo of ${this.name}`,this._cardElement.querySelector(".card__title").textContent=this.name,!0===this.isLiked&&this.buttonLike.classList.add("card__button-like_active"),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this)})),this.buttonLike=this._cardElement.querySelector(".card__button-like"),this.buttonLike.addEventListener("click",(()=>{Array.from(this.buttonLike.classList).includes("card__button-like_active")?this._handleUnlike(this.id):this._handleLike(this.id)})),this.buttonTrash=this._cardElement.querySelector(".card__button-delete"),this.buttonTrash.addEventListener("click",(()=>{this._handleDelete(this._cardElement,this.id)}))}_handleLikeButton(){this.buttonLike.classList.toggle("card__button-like_active")}_handleTrashButton(){this._cardElement.remove()}}function k(e){const t=e.name,r=e.link;B.open({title:t,link:r})}function C(e){const t=new y(e,"#card-template",k,{handleDelete:(e,t)=>{R.open(),R.catchSelectedCard(e,t)},handleLike:e=>{F.addLike(e).then((e=>{t._handleLikeButton()}))},handleUnlike:e=>{F.deleteLike(e).then((e=>{t._handleLikeButton()}))}});return t.generateCard()}function g(e,t,r){t.querySelector(".form__button").textContent=e?"Saving...":r}class q{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._errorMessages=this._form.querySelectorAll(".form__input-error"),this._inputs=this._form.querySelectorAll(".form__input")}showInputError(e,t){e.classList.add(this._inputErrorClass);const r=this._form.querySelector(`.${e.id}-error`);r.textContent=t,r.classList.add(this._errorClass)}hideInputError(e){e.classList.remove(this._inputErrorClass),this._form.querySelector(`.${e.id}-error`).classList.remove(this._errorClass)}checkInputValidity(e){if(e.validity.valid)this.hideInputError(e);else{const t=e.validationMessage;this.showInputError(e,t)}}hasInvalidInput(){return this.inputList.some((e=>!e.validity.valid))}toggleButtonState(){this.hasInvalidInput()?(this.buttonElement.classList.add(this._inactiveButtonClass),this.buttonElement.setAttribute("disabled",!0)):(this.buttonElement.classList.remove(this._inactiveButtonClass),this.buttonElement.removeAttribute("disabled"))}setEventListeners(){this.inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this.buttonElement=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this.inputList.forEach((e=>{this.inputElement=e,this.inputElement.addEventListener("input",(()=>{this.checkInputValidity(e),this.hasInvalidInput(),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.toggleButtonState()})),this.setEventListeners()}clearError(){this._errorMessages.forEach((e=>{e.classList.remove("form__input-error_active")})),this._inputs.forEach((e=>{e.classList.remove("form__input_type_error")}))}}class I{constructor(e,t){let{data:r,renderer:s}=e;this._items=r,this._renderer=s,this._container=t}addItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}}class U{constructor(e){this.popup=e}open(){this.popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this.buttonClose=this.popup.querySelector(".modal__button-close"),this.buttonClose.addEventListener("click",(()=>{this.close()})),this.popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class w extends U{constructor(e,t){let{handleFormSubmit:r,handleClearError:s,renderLoading:n}=t;super(e),this.handleFormSubmit=r,this.form=this.popup.querySelector(".form"),this.handleClearError=s,this._renderLoading=n}close(){super.close(),this.form.reset(),this.handleClearError()}_getInputValues(){const e=this.form.querySelectorAll(".form__input"),t={};for(const r of e)t[r.name]=r.value;return t}setEventListeners(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{this._renderLoading(),e.preventDefault(),this.handleFormSubmit(this._getInputValues())}))}}const B=new class extends U{constructor(e,t,r){super(e),this._modalImage=t,this._modalTitle=r}open(e){this._modalTitle.textContent=e.title,this._modalImage.src=e.link,this._modalImage.alt=`photo of ${e.title}`,super.open()}}(r,s,n);B.setEventListeners();const $=new class{constructor(e,t,r){this.name=e,this.job=t,this.avatar=r}getUserInfo(){return{name:this.name.textContent,about:this.job.textContent}}setUserInfo(e){let{name:t,about:r,avatar:s}=e;this.name.textContent=t,this.job.textContent=r,this.avatar.src=s}}(d,h,L),T=new q(_,m);T.enableValidation();const P=new q(_,p);P.enableValidation();const A=new q(_,f);A.enableValidation();const x=new w(o,{handleFormSubmit:e=>{F.editProfile(e).then((e=>{x.close(),$.setUserInfo(e)})).finally((()=>{g(!1,m,"Save")}))},handleClearError:()=>{T.clearError()},renderLoading:()=>{g(!0,m)}});x.setEventListeners(),i.addEventListener("click",(()=>{!function(e){let{name:t,about:r}=e;c.value=t,u.value=r}($.getUserInfo()),x.open()}));const F=new class{constructor(e,t){let{baseUrl:r,headers:s}=e;this._baseUrl=r,this._headers=s,this._checkResponse=t}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}editProfile(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProPic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}returnUserInfoAndCards(){const e=[this.loadUserInfo(),this.getInitialCards()];return Promise.all(e)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f01264e8-2101-4ab7-b120-b09b55e63681","Content-Type":"application/json"}},(function(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}));F.returnUserInfoAndCards().then((e=>{$.setUserInfo(e[0]),new I({data:e[1],renderer:e=>{const r=C(e);t.append(r)}},t).renderItems()})).catch((e=>console.error(e)));const D=new w(b,{handleFormSubmit:e=>{F.updateProPic(e.link).then((t=>{D.close(),L.src=e.link})).finally((()=>{g(!1,f,"Save")}))},handleClearError:()=>{A.clearError()},renderLoading:()=>{g(!0,f)}},A);D.setEventListeners(),v.addEventListener("click",(()=>{D.open()}));const R=new class extends U{constructor(e,t){let{handleFormSubmit:r,renderLoading:s}=t;super(e),this.handleFormSubmit=r,this.form=this.popup.querySelector(".form"),this._renderLoading=s}close(){super.close()}setEventListener(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{e.preventDefault(),this._renderLoading(),this.handleFormSubmit(this.cardElement,this.id)}))}catchSelectedCard(e,t){this.cardElement=e,this.id=t}}(S,{handleFormSubmit:(e,t)=>{F.deleteCard(t).then((t=>{e.remove(),R.close()})).finally((()=>{g(!1,E,"Yes")}))},renderLoading:()=>{g(!0,E)}});R.setEventListener();const j=new w(l,{handleFormSubmit:e=>{F.addNewCard(e).then((e=>{j.close(),new I({data:[e],renderer:e=>{const r=C(e);t.prepend(r)}},t).renderItems()})).finally((()=>{g(!1,p,"Create")}))},handleClearError:()=>{P.clearError()},renderLoading:()=>{g(!0,p)}},P);j.setEventListeners(),a.addEventListener("click",(()=>{j.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUsxQixpQkFBaUIsVUFBVzJELElBQ3BDQSxFQUFJQyxpQkFHSm5GLEtBQUsyRyxpQkFFTDNHLEtBQUt3RyxpQkFBaUJ4RyxLQUFLdUMsWUFBYXZDLEtBQUtLLEdBQUcsR0FFcEQsQ0FFQW9DLGlCQUFBQSxDQUFrQkYsRUFBYStILEdBQzdCdEssS0FBS3VDLFlBQWNBLEVBQ25CdkMsS0FBS0ssR0FBS2lLLENBQ1osR0o0SG1EaEwsRUFBYSxDQUNoRWtILGlCQUFrQkEsQ0FBQ2pFLEVBQWErSCxLQUM5QjVILEVBQ0d3RyxXQUFXb0IsR0FDWDFILE1BQU1DLElBQ0xOLEVBQVlSLFNBQ1pTLEVBQVkwRCxPQUFPLElBRXBCOEIsU0FBUSxLQUNQakYsR0FBYyxFQUFPN0QsRUFBWSxNQUFNLEdBQ3ZDLEVBRU42RCxjQUFlQSxLQUNiQSxHQUFjLEVBQU03RCxFQUFXLElBR25Dc0QsRUFBWTZILG1CQUVaLE1BQU1FLEVBQWEsSUFBSWhFLEVBQ3JCbkksRUFDQSxDQUNFb0ksaUJBQW1CbEosSUFDakJvRixFQUNHc0csV0FBVzFMLEdBQ1hzRixNQUFNQyxJQUNMMEgsRUFBV3JFLFFBS0ssSUFBSVosRUFDbEIsQ0FDRTdGLEtBQU0sQ0FBQ29ELEdBQ1AyQyxTQUFXbkQsSUFDVCxNQUFNRSxFQUFjSCxFQUFXQyxHQUUvQjFFLEVBQVNrSSxRQUFRdEQsRUFBWSxHQUdqQzVFLEdBRU1tSSxhQUFhLElBRXRCa0MsU0FBUSxLQUNQakYsR0FBYyxFQUFPL0QsRUFBZSxTQUFTLEdBQzdDLEVBRU55SCxpQkFBa0JBLEtBQ2hCbUIsRUFBbUJ4QyxZQUFZLEVBRWpDckMsY0FBZUEsS0FDYkEsR0FBYyxFQUFNL0QsRUFBYyxHQUd0QzRJLEdBRUYyQyxFQUFXeEYsb0JBQ1g1RyxFQUFlb0QsaUJBQWlCLFNBQVMsS0FDdkNnSixFQUFXcEksTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmV4cG9ydCBjb25zdCBtb2RhbENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgY2FyZE1vZGFsSW1hZ2UgPSBtb2RhbENhcmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgY2FyZE1vZGFsVGl0bGUgPSBtb2RhbENhcmQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FyZC10aXRsZVwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzQnV0dG9uQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzLW1vZGFsXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xuXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0LW5hbWVcIik7XG5leHBvcnQgY29uc3QgaW5wdXREZXNjcmlwdGlvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIuZm9ybV9faW5wdXQtZGVzY3JpcHRpb25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IGNhcmRzSW5wdXRUaXRsZSA9IGNhcmRzTW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC10aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkc0lucHV0TGluayA9IGNhcmRzTW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC1saW5rXCIpO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5leHBvcnQgY29uc3QgY2FyZHNFZGl0Rm9ybSA9IGNhcmRzTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkcy1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IHByb3BpY0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb3BpYy1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1mb3JtXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvcGljTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb3BpYy1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9waWNCdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1lZFwiKTtcbmV4cG9ydCBjb25zdCBwcm9waWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICB7IGhhbmRsZURlbGV0ZSwgaGFuZGxlTGlrZSwgaGFuZGxlVW5saWtlIH1cbiAgKSB7XG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMubGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG5cbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XG5cbiAgICB0aGlzLmlzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XG5cbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGU7XG4gICAgdGhpcy5faGFuZGxlTGlrZSA9IGhhbmRsZUxpa2U7XG4gICAgdGhpcy5faGFuZGxlVW5saWtlID0gaGFuZGxlVW5saWtlO1xuICB9XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9faW1hZ2VcIlxuICAgICkuYWx0ID0gYHBob3RvIG9mICR7dGhpcy5uYW1lfWA7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcblxuICAgIGlmICh0aGlzLmlzTGlrZWQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xuICAgICAgfSk7XG4gICAgdGhpcy5idXR0b25MaWtlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcblxuICAgIHRoaXMuYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhQXJyYXkuZnJvbSh0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0KS5pbmNsdWRlcyhcbiAgICAgICAgICBcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKHRoaXMuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlVW5saWtlKHRoaXMuaWQpO1xuICAgICAgfVxuXG4gICAgICAvL3RoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICB9KTtcbiAgICB0aGlzLmJ1dHRvblRyYXNoID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpO1xuICAgIHRoaXMuYnV0dG9uVHJhc2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLl9jYXJkRWxlbWVudCwgdGhpcy5pZCk7XG4gICAgICAvKlxuICAgICAgZGVsZXRlUG9wdXAub3BlbigpO1xuICAgICAgZGVsZXRlUG9wdXAuY2F0Y2hTZWxlY3RlZENhcmQodGhpcy5fY2FyZEVsZW1lbnQsIHRoaXMuaWQpO1xuICAgICAgKi9cbiAgICB9KTtcbiAgfVxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcbiAgfVxuICBfaGFuZGxlVHJhc2hCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IHsgZGVsZXRlUG9wdXAsIHByZXZpZXdQb3B1cCwgYXBpIH0gZnJvbSBcIi4uL3BhZ2VzL2luZGV4LmpzXCI7XG5cbmltcG9ydCB7IGlucHV0TmFtZSwgaW5wdXREZXNjcmlwdGlvbiB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKHsgbmFtZSwgYWJvdXQgfSkge1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gYWJvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHRoaXNPYmopIHtcbiAgY29uc3QgdGl0bGUgPSB0aGlzT2JqLm5hbWU7XG4gIGNvbnN0IGxpbmsgPSB0aGlzT2JqLmxpbms7XG5cbiAgcHJldmlld1BvcHVwLm9wZW4oeyB0aXRsZSwgbGluayB9KTtcbn1cbi8qXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cbiovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2ssIHtcbiAgICBoYW5kbGVEZWxldGU6IChjYXJkRWxlbWVudCwgaWQpID0+IHtcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZVBvcHVwLmNhdGNoU2VsZWN0ZWRDYXJkKGNhcmRFbGVtZW50LCBpZCk7XG4gICAgfSxcbiAgICBoYW5kbGVMaWtlOiAoaWQpID0+IHtcbiAgICAgIGFwaS5hZGRMaWtlKGlkKS50aGVuKChyKSA9PiB7XG4gICAgICAgIGNhcmQuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlVW5saWtlOiAoaWQpID0+IHtcbiAgICAgIGFwaS5kZWxldGVMaWtlKGlkKS50aGVuKChyKSA9PiB7XG4gICAgICAgIGNhcmQuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBmb3JtLCB0ZXh0KSB7XG4gIGNvbnN0IHN1YkJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBzdWJCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9IGVsc2Uge1xuICAgIHN1YkJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVzcG9uc2UocmVzKSB7XG4gIGlmIChyZXMub2spIHtcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWdPYmosIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZ09iai5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnT2JqLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWdPYmouaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWdPYmouaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWdPYmouZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZXMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXQtZXJyb3JcIik7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG4gIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgdGhpcy5zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuXG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLmlucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuaGFzSW52YWxpZElucHV0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsZWFyRXJyb3IoKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICAgIH0pO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgfSk7XG4gICAgLypcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXQtZXJyb3JcIik7XG4gICAgZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICAgIH0pO1xuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgfSk7XG4gICAgKi9cbiAgfVxufVxuXG5jb25zdCBjb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cbiAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMucG9wdXAgPSBwb3B1cDtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5idXR0b25DbG9zZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uLWNsb3NlXCIpO1xuICAgIHRoaXMuYnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCB7IGhhbmRsZUZvcm1TdWJtaXQsIGhhbmRsZUNsZWFyRXJyb3IsIHJlbmRlckxvYWRpbmcgfSkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuZm9ybSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuXG4gICAgdGhpcy5oYW5kbGVDbGVhckVycm9yID0gaGFuZGxlQ2xlYXJFcnJvcjtcbiAgICB0aGlzLl9yZW5kZXJMb2FkaW5nID0gcmVuZGVyTG9hZGluZztcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuXG4gICAgdGhpcy5oYW5kbGVDbGVhckVycm9yKCk7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0TGlzdCkge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIC8vXG4gICAgICAvL3JlbmRlckxvYWRpbmcodHJ1ZSwgdGhpcy5mb3JtKTtcbiAgICAgIHRoaXMuX3JlbmRlckxvYWRpbmcoKTtcblxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIC8vdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgY2FyZExpc3QsXG4gIHByb2ZpbGVCdXR0b25FZGl0LFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBjYXJkc0J1dHRvbkFkZCxcbiAgY2FyZHNNb2RhbCxcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdEZvcm0sXG4gIGNhcmRzRWRpdEZvcm0sXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZVN1YnRpdGxlLFxuICBtb2RhbENhcmQsXG4gIHByb3BpY0Zvcm0sXG4gIHByb3BpY01vZGFsLFxuICBwcm9waWNCdXR0b25FZGl0LFxuICBwcm9waWMsXG4gIGRlbGV0ZU1vZGFsLFxuICBkZWxldGVGb3JtLFxuICBjYXJkTW9kYWxJbWFnZSxcbiAgY2FyZE1vZGFsVGl0bGUsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUNhcmQsXG4gIGZpbGxQcm9maWxlRm9ybSxcbiAgcmVuZGVyTG9hZGluZyxcbiAgY2hlY2tSZXNwb25zZSxcbn0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5cbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoQ29uZmlybWF0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG4vL1xuZXhwb3J0IGNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgbW9kYWxDYXJkLFxuICBjYXJkTW9kYWxJbWFnZSxcbiAgY2FyZE1vZGFsVGl0bGVcbik7XG5wcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlU3VidGl0bGUsIHByb3BpYyk7XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjYXJkc0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRzRWRpdEZvcm0pO1xuY2FyZHNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvcGljRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvcGljRm9ybSk7XG5wcm9waWNGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZUVkaXRNb2RhbCwge1xuICBoYW5kbGVGb3JtU3VibWl0OiAob2JqKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZWRpdFByb2ZpbGUob2JqKVxuICAgICAgLnRoZW4oKHIpID0+IHtcbiAgICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcHJvZmlsZUVkaXRGb3JtLCBcIlNhdmVcIik7XG4gICAgICB9KTtcbiAgfSxcbiAgaGFuZGxlQ2xlYXJFcnJvcjogKCkgPT4ge1xuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmNsZWFyRXJyb3IoKTtcbiAgfSxcbiAgcmVuZGVyTG9hZGluZzogKCkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvZmlsZUVkaXRGb3JtKTtcbiAgfSxcbn0pO1xucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmaWxsUHJvZmlsZUZvcm0ocHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKSk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuLy9cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoXG4gIHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCJmMDEyNjRlOC0yMTAxLTRhYjctYjEyMC1iMDliNTVlNjM2ODFcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH0sXG4gIH0sXG4gIGNoZWNrUmVzcG9uc2Vcbik7XG5cbi8qY2hlY2s6XG5jb25zdCBuZXdDYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IFwiXCIsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRMaXN0XG4pO1xuKi9cbmFwaVxuICAucmV0dXJuVXNlckluZm9BbmRDYXJkcygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhyZXNbMF0pO1xuXG4gICAgY29uc3QgbmV3Q2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGRhdGE6IHJlc1sxXSxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgICAgIGNhcmRMaXN0LmFwcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgY2FyZExpc3RcbiAgICApO1xuICAgIG5ld0NhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcblxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgcHJvcGljTW9kYWwsXG4gIHtcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAob2JqKSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLnVwZGF0ZVByb1BpYyhvYmoubGluaylcbiAgICAgICAgLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIHByb3BpYy5zcmMgPSBvYmoubGluaztcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHByb3BpY0Zvcm0sIFwiU2F2ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVDbGVhckVycm9yOiAoKSA9PiB7XG4gICAgICBwcm9waWNGb3JtVmFsaWRhdG9yLmNsZWFyRXJyb3IoKTtcbiAgICB9LFxuICAgIHJlbmRlckxvYWRpbmc6ICgpID0+IHtcbiAgICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvcGljRm9ybSk7XG4gICAgfSxcbiAgfSxcbiAgcHJvcGljRm9ybVZhbGlkYXRvclxuKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb3BpY0J1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oZGVsZXRlTW9kYWwsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGNhcmRFbGVtZW50LCBvYmpJZCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQob2JqSWQpXG4gICAgICAudGhlbigocikgPT4ge1xuICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGRlbGV0ZUZvcm0sIFwiWWVzXCIpO1xuICAgICAgfSk7XG4gIH0sXG4gIHJlbmRlckxvYWRpbmc6ICgpID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGRlbGV0ZUZvcm0pO1xuICB9LFxufSk7XG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVyKCk7XG5cbmNvbnN0IGNhcmRzUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgY2FyZHNNb2RhbCxcbiAge1xuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChvYmopID0+IHtcbiAgICAgIGFwaVxuICAgICAgICAuYWRkTmV3Q2FyZChvYmopXG4gICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgY2FyZHNQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIC8qXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQocik7XG4gICAgICBjYXJkTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgICAgICovXG4gICAgICAgICAgY29uc3QgYWRkZWRDUyA9IG5ldyBTZWN0aW9uKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkYXRhOiBbcl0sXG4gICAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcblxuICAgICAgICAgICAgICAgIGNhcmRMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhcmRMaXN0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRlZENTLnJlbmRlckl0ZW1zKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBjYXJkc0VkaXRGb3JtLCBcIkNyZWF0ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVDbGVhckVycm9yOiAoKSA9PiB7XG4gICAgICBjYXJkc0Zvcm1WYWxpZGF0b3IuY2xlYXJFcnJvcigpO1xuICAgIH0sXG4gICAgcmVuZGVyTG9hZGluZzogKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyh0cnVlLCBjYXJkc0VkaXRGb3JtKTtcbiAgICB9LFxuICB9LFxuICBjYXJkc0Zvcm1WYWxpZGF0b3Jcbik7XG5jYXJkc1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkc0J1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkc1BvcHVwLm9wZW4oKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIG1vZGFsSW1hZ2UsIG1vZGFsVGl0bGUpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gbW9kYWxJbWFnZTtcbiAgICB0aGlzLl9tb2RhbFRpdGxlID0gbW9kYWxUaXRsZTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX21vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gYHBob3RvIG9mICR7ZGF0YS50aXRsZX1gO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICAvKlxuICAgIGNhcmRNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcbiAgICBjYXJkTW9kYWxJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgY2FyZE1vZGFsSW1hZ2UuYWx0ID0gYHBob3RvIG9mICR7ZGF0YS50aXRsZX1gO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICAqL1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBqb2IsIGF2YXRhcikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG5cbiAgICB0aGlzLmF2YXRhciA9IGF2YXRhcjtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuam9iLnRleHRDb250ZW50ID0gYWJvdXQ7XG5cbiAgICB0aGlzLmF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSwgY2hlY2tSZXNwb25zZSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuXG4gICAgdGhpcy5fY2hlY2tSZXNwb25zZSA9IGNoZWNrUmVzcG9uc2U7XG4gIH1cblxuICBsb2FkVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXG4gICAgKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2VcbiAgICApO1xuICB9XG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZVByb1BpYyhsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHJldHVyblVzZXJJbmZvQW5kQ2FyZHMoKSB7XG4gICAgY29uc3QgcHJvZmlsZUluZm8gPSB0aGlzLmxvYWRVc2VySW5mbygpO1xuICAgIGNvbnN0IGNhcmRJbmZvID0gdGhpcy5nZXRJbml0aWFsQ2FyZHMoKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtwcm9maWxlSW5mbywgY2FyZEluZm9dO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCwgeyBoYW5kbGVGb3JtU3VibWl0LCByZW5kZXJMb2FkaW5nIH0pIHtcbiAgICBzdXBlcihwb3B1cCk7XG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcblxuICAgIHRoaXMuX3JlbmRlckxvYWRpbmcgPSByZW5kZXJMb2FkaW5nO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVyKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgLy9yZW5kZXJMb2FkaW5nKHRydWUsIHRoaXMuZm9ybSk7XG4gICAgICB0aGlzLl9yZW5kZXJMb2FkaW5nKCk7XG5cbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmNhcmRFbGVtZW50LCB0aGlzLmlkKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNhdGNoU2VsZWN0ZWRDYXJkKGNhcmRFbGVtZW50LCBvYmpJZCkge1xuICAgIHRoaXMuY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgICB0aGlzLmlkID0gb2JqSWQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNhcmRMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibW9kYWxDYXJkIiwiY2FyZE1vZGFsSW1hZ2UiLCJjYXJkTW9kYWxUaXRsZSIsInByb2ZpbGVCdXR0b25FZGl0IiwicHJvZmlsZUVkaXRNb2RhbCIsImNhcmRzQnV0dG9uQWRkIiwiY2FyZHNNb2RhbCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsImlucHV0TmFtZSIsImlucHV0RGVzY3JpcHRpb24iLCJjb25maWciLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0Rm9ybSIsImNhcmRzRWRpdEZvcm0iLCJwcm9waWNGb3JtIiwiZGVsZXRlRm9ybSIsInByb3BpY01vZGFsIiwicHJvcGljQnV0dG9uRWRpdCIsInByb3BpYyIsImRlbGV0ZU1vZGFsIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfcmVmIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsImhhbmRsZVVubGlrZSIsInRoaXMiLCJuYW1lIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsImlkIiwiX2lkIiwiaXNMaWtlZCIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlTGlrZSIsIl9oYW5kbGVVbmxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJidXR0b25MaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiYnV0dG9uVHJhc2giLCJfaGFuZGxlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9oYW5kbGVUcmFzaEJ1dHRvbiIsInJlbW92ZSIsInRoaXNPYmoiLCJ0aXRsZSIsInByZXZpZXdQb3B1cCIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiaXRlbSIsImNhcmQiLCJjYXJkRWxlbWVudCIsImRlbGV0ZVBvcHVwIiwiY2F0Y2hTZWxlY3RlZENhcmQiLCJhcGkiLCJhZGRMaWtlIiwidGhlbiIsInIiLCJkZWxldGVMaWtlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImZvcm0iLCJ0ZXh0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZ09iaiIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2Vycm9yTWVzc2FnZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0cyIsInNob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaGlkZUlucHV0RXJyb3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJidXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2xlYXJFcnJvciIsImlucHV0IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJQb3B1cCIsInBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnV0dG9uQ2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVDbGVhckVycm9yIiwic3VwZXIiLCJfcmVuZGVyTG9hZGluZyIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInBvcHVwU2VsZWN0b3IiLCJtb2RhbEltYWdlIiwibW9kYWxUaXRsZSIsIl9tb2RhbEltYWdlIiwiX21vZGFsVGl0bGUiLCJwcm9maWxlSW5mbyIsImpvYiIsImF2YXRhciIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZHNGb3JtVmFsaWRhdG9yIiwicHJvcGljRm9ybVZhbGlkYXRvciIsInByb2ZpbGVQb3B1cCIsImVkaXRQcm9maWxlIiwiZmluYWxseSIsImZpbGxQcm9maWxlRm9ybSIsImNoZWNrUmVzcG9uc2UiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsImxvYWRVc2VySW5mbyIsImZldGNoIiwiZ2V0SW5pdGlhbENhcmRzIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ1cGRhdGVQcm9QaWMiLCJyZXR1cm5Vc2VySW5mb0FuZENhcmRzIiwicHJvbWlzZXMiLCJQcm9taXNlIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsInJlcyIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsImFwcGVuZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiYXZhdGFyUG9wdXAiLCJzZXRFdmVudExpc3RlbmVyIiwib2JqSWQiLCJjYXJkc1BvcHVwIl0sInNvdXJjZVJvb3QiOiIifQ==