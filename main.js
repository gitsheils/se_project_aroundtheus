(()=>{"use strict";var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hi:()=>A,cM:()=>R,$f:()=>U});const t=document.querySelector(".cards__list"),r=document.querySelector("#card-modal"),s=r.querySelector(".modal__image"),n=r.querySelector(".modal__card-title"),i=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-modal"),a=document.querySelector(".profile__add-button"),l=document.querySelector("#cards-modal"),c=document.querySelector(".profile__title"),h=document.querySelector(".profile__subtitle"),d=o.querySelector(".form__input-name"),u=o.querySelector(".form__input-description"),m=(l.querySelector(".form__input-title"),l.querySelector(".form__input-link"),{inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}),_=o.querySelector(".form"),p=l.querySelector("#cards-form"),f=document.querySelector("#propic-form"),b=document.querySelector("#delete-form"),E=document.querySelector("#propic-modal"),S=document.querySelector(".profile__image-ed"),v=document.querySelector(".profile__image"),L=document.querySelector("#delete-modal");class y{constructor(e,t,r,s){let{handleDelete:n,handleLike:i,handleUnlike:o}=s;this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=r,this.id=e._id,this.isLiked=e.isLiked,this._handleDelete=n,this._handleLike=i,this._handleUnlike=o}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this.link,this._cardElement.querySelector(".card__image").alt=`photo of ${this.name}`,this._cardElement.querySelector(".card__title").textContent=this.name,!0===this.isLiked&&this.buttonLike.classList.add("card__button-like_active"),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this)})),this.buttonLike=this._cardElement.querySelector(".card__button-like"),this.buttonLike.addEventListener("click",(()=>{Array.from(this.buttonLike.classList).includes("card__button-like_active")?this._handleUnlike(this.id):this._handleLike(this.id)})),this.buttonTrash=this._cardElement.querySelector(".card__button-delete"),this.buttonTrash.addEventListener("click",(()=>{this._handleDelete(this._cardElement,this.id)}))}handleLikeButton(){this.buttonLike.classList.toggle("card__button-like_active")}_handleTrashButton(){this._cardElement.remove()}}function k(e){const t=e.name,r=e.link;U.open({title:t,link:r})}function g(e,t,r){t.querySelector(".form__button").textContent=e?"Saving...":r}class C{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._errorMessages=this._form.querySelectorAll(".form__input-error"),this._inputs=this._form.querySelectorAll(".form__input")}showInputError(e,t){e.classList.add(this._inputErrorClass);const r=this._form.querySelector(`.${e.id}-error`);r.textContent=t,r.classList.add(this._errorClass)}hideInputError(e){e.classList.remove(this._inputErrorClass),this._form.querySelector(`.${e.id}-error`).classList.remove(this._errorClass)}checkInputValidity(e){if(e.validity.valid)this.hideInputError(e);else{const t=e.validationMessage;this.showInputError(e,t)}}hasInvalidInput(){return this.inputList.some((e=>!e.validity.valid))}toggleButtonState(){this.hasInvalidInput()?(this.buttonElement.classList.add(this._inactiveButtonClass),this.buttonElement.setAttribute("disabled",!0)):(this.buttonElement.classList.remove(this._inactiveButtonClass),this.buttonElement.removeAttribute("disabled"))}setEventListeners(){this.inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this.buttonElement=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this.inputList.forEach((e=>{this.inputElement=e,this.inputElement.addEventListener("input",(()=>{this.checkInputValidity(e),this.hasInvalidInput(),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.toggleButtonState()})),this.setEventListeners()}clearError(){this._errorMessages.forEach((e=>{e.classList.remove("form__input-error_active")})),this._inputs.forEach((e=>{e.classList.remove("form__input_type_error")}))}resetSubmitButton(){this.buttonElement.classList.add(this._inactiveButtonClass),this.buttonElement.setAttribute("disabled",!0)}}class q{constructor(e){this.popup=e}open(){this.popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this.buttonClose=this.popup.querySelector(".modal__button-close"),this.buttonClose.addEventListener("click",(()=>{this.close()})),this.popup.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class I extends q{constructor(e,t){let{handleFormSubmit:r,handleClearError:s,renderLoading:n}=t;super(e),this.handleFormSubmit=r,this.form=this.popup.querySelector(".form"),this.handleClearError=s,this._renderLoading=n}close(){super.close(),this.form.reset(),this.handleClearError()}_getInputValues(){const e=this.form.querySelectorAll(".form__input"),t={};for(const r of e)t[r.name]=r.value;return t}setEventListeners(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{this._renderLoading(),e.preventDefault(),this.handleFormSubmit(this._getInputValues())}))}}const U=new class extends q{constructor(e,t,r){super(e),this._modalImage=t,this._modalTitle=r}open(e){this._modalTitle.textContent=e.title,this._modalImage.src=e.link,this._modalImage.alt=`photo of ${e.title}`,super.open()}}(r,s,n);U.setEventListeners();const B=new class{constructor(e,t,r){this.name=e,this.job=t,this.avatar=r}getUserInfo(){return{name:this.name.textContent,about:this.job.textContent}}setUserInfo(e){let{name:t,about:r,avatar:s}=e;this.name.textContent=t,this.job.textContent=r,this.avatar.src=s}}(c,h,v),w=new C(m,_);w.enableValidation();const $=new C(m,p);$.enableValidation();const T=new C(m,f);T.enableValidation();const P=new I(o,{handleFormSubmit:e=>{A.editProfile(e).then((e=>{P.close(),B.setUserInfo(e),w.resetSubmitButton()})).catch((e=>{console.log(e)})).finally((()=>{g(!1,_,"Save")}))},handleClearError:()=>{w.clearError()},renderLoading:()=>{g(!0,_)}});P.setEventListeners(),i.addEventListener("click",(()=>{!function(e){let{name:t,about:r}=e;d.value=t,u.value=r}(B.getUserInfo()),P.open()}));const A=new class{constructor(e,t){let{baseUrl:r,headers:s}=e;this._baseUrl=r,this._headers=s,this._checkResponse=t}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}editProfile(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProPic(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}returnUserInfoAndCards(){const e=[this.loadUserInfo(),this.getInitialCards()];return Promise.all(e)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f01264e8-2101-4ab7-b120-b09b55e63681","Content-Type":"application/json"}},(function(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)})),x=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=t}addItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}setItems(e){this._items=e}}({renderer:e=>{const t=function(e){const t=new y(e,"#card-template",k,{handleDelete:(e,t)=>{R.open(),R.catchSelectedCard(e,t)},handleLike:e=>{A.addLike(e).then((e=>{t.handleLikeButton()})).catch((e=>console.log(e)))},handleUnlike:e=>{A.deleteLike(e).then((e=>{t.handleLikeButton()})).catch((e=>console.log(e)))}});return t.generateCard()}(e);x.addItem(t)}},t);A.returnUserInfoAndCards().then((e=>{B.setUserInfo(e[0]),x.setItems(e[1].toReversed()),x.renderItems()})).catch((e=>console.error(e)));const F=new I(E,{handleFormSubmit:e=>{A.updateProPic(e.link).then((e=>{F.close(),B.setUserInfo(e),T.resetSubmitButton()})).catch((e=>console.error(e))).finally((()=>{g(!1,f,"Save")}))},handleClearError:()=>{T.clearError()},renderLoading:()=>{g(!0,f)}},T);F.setEventListeners(),S.addEventListener("click",(()=>{F.open()}));const R=new class extends q{constructor(e,t){let{handleFormSubmit:r,renderLoading:s}=t;super(e),this.handleFormSubmit=r,this.form=this.popup.querySelector(".form"),this._renderLoading=s}setEventListener(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{e.preventDefault(),this._renderLoading(),this.handleFormSubmit(this.cardElement,this.id)}))}catchSelectedCard(e,t){this.cardElement=e,this.id=t}}(L,{handleFormSubmit:(e,t)=>{A.deleteCard(t).then((t=>{e.remove(),R.close()})).catch((e=>console.error(e))).finally((()=>{g(!1,b,"Yes")}))},renderLoading:()=>{g(!0,b)}});R.setEventListener();const D=new I(l,{handleFormSubmit:e=>{A.addNewCard(e).then((e=>{D.close(),x.setItems([e]),x.renderItems(),$.resetSubmitButton()})).catch((e=>console.error(e))).finally((()=>{g(!1,p,"Create")}))},handleClearError:()=>{$.clearError()},renderLoading:()=>{g(!0,p)}},$);D.setEventListeners(),a.addEventListener("click",(()=>{D.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRTFFLEVDTkRILEVBQXdCLENBQUNTLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEkscUNDQTNFLE1BQU1JLEVBQVdDLFNBQVNDLGNBQWMsZ0JBRWxDQyxFQUFZRixTQUFTQyxjQUFjLGVBQ25DRSxFQUFpQkQsRUFBVUQsY0FBYyxpQkFDekNHLEVBQWlCRixFQUFVRCxjQUFjLHNCQUV6Q0ksRUFBb0JMLFNBQVNDLGNBQ3hDLHlCQUVXSyxFQUFtQk4sU0FBU0MsY0FBYyxrQkFDMUNNLEVBQWlCUCxTQUFTQyxjQUFjLHdCQUN4Q08sRUFBYVIsU0FBU0MsY0FBYyxnQkFFcENRLEVBQWVULFNBQVNDLGNBQWMsbUJBQ3RDUyxFQUFrQlYsU0FBU0MsY0FBYyxzQkFFekNVLEVBQVlMLEVBQWlCTCxjQUFjLHFCQUMzQ1csRUFBbUJOLEVBQWlCTCxjQUMvQyw0QkFNV1ksR0FIa0JMLEVBQVdQLGNBQWMsc0JBQzFCTyxFQUFXUCxjQUFjLHFCQUVqQyxDQUNwQmEsY0FBZSxlQUNmQyxxQkFBc0IsZ0JBQ3RCQyxvQkFBcUIsa0JBQ3JCQyxnQkFBaUIseUJBQ2pCQyxXQUFZLDZCQUdEQyxFQUFrQmIsRUFBaUJMLGNBQWMsU0FDakRtQixFQUFnQlosRUFBV1AsY0FBYyxlQUN6Q29CLEVBQWFyQixTQUFTQyxjQUFjLGdCQUNwQ3FCLEVBQWF0QixTQUFTQyxjQUFjLGdCQUVwQ3NCLEVBQWN2QixTQUFTQyxjQUFjLGlCQUNyQ3VCLEVBQW1CeEIsU0FBU0MsY0FBYyxzQkFDMUN3QixFQUFTekIsU0FBU0MsY0FBYyxtQkFDaEN5QixFQUFjMUIsU0FBU0MsY0FBYyxpQkN4Q25DLE1BQU0wQixFQUNuQkMsV0FBQUEsQ0FDRUMsRUFDQUMsRUFDQUMsRUFBZ0JDLEdBRWhCLElBREEsYUFBRUMsRUFBWSxXQUFFQyxFQUFVLGFBQUVDLEdBQWNILEVBRTFDSSxLQUFLQyxLQUFPUixFQUFLUSxLQUNqQkQsS0FBS0UsS0FBT1QsRUFBS1MsS0FDakJGLEtBQUtHLGNBQWdCVCxFQUNyQk0sS0FBS0ksa0JBQW9CVCxFQUV6QkssS0FBS0ssR0FBS1osRUFBS2EsSUFFZk4sS0FBS08sUUFBVWQsRUFBS2MsUUFFcEJQLEtBQUtRLGNBQWdCWCxFQUNyQkcsS0FBS1MsWUFBY1gsRUFDbkJFLEtBQUtVLGNBQWdCWCxDQUN2QixDQUNBWSxZQUFBQSxHQUtFLE9BSmlCL0MsU0FDZEMsY0FBY21DLEtBQUtHLGVBQ25CUyxRQUFRL0MsY0FBYyxTQUN0QmdELFdBQVUsRUFFZixDQUNBQyxZQUFBQSxHQWFFLE9BWkFkLEtBQUtlLGFBQWVmLEtBQUtXLGVBQ3pCWCxLQUFLZ0IscUJBQ0xoQixLQUFLZSxhQUFhbEQsY0FBYyxnQkFBZ0JvRCxJQUFNakIsS0FBS0UsS0FDM0RGLEtBQUtlLGFBQWFsRCxjQUNoQixnQkFDQXFELElBQU8sWUFBV2xCLEtBQUtDLE9BQ3pCRCxLQUFLZSxhQUFhbEQsY0FBYyxnQkFBZ0JzRCxZQUFjbkIsS0FBS0MsTUFFOUMsSUFBakJELEtBQUtPLFNBQ1BQLEtBQUtvQixXQUFXQyxVQUFVQyxJQUFJLDRCQUd6QnRCLEtBQUtlLFlBQ2QsQ0FFQUMsa0JBQUFBLEdBQ0VoQixLQUFLZSxhQUNGbEQsY0FBYyxnQkFDZDBELGlCQUFpQixTQUFTLEtBQ3pCdkIsS0FBS0ksa0JBQWtCSixLQUFLLElBRWhDQSxLQUFLb0IsV0FBYXBCLEtBQUtlLGFBQWFsRCxjQUFjLHNCQUVsRG1DLEtBQUtvQixXQUFXRyxpQkFBaUIsU0FBUyxLQUVyQ0MsTUFBTUMsS0FBS3pCLEtBQUtvQixXQUFXQyxXQUFXSyxTQUNyQyw0QkFLRjFCLEtBQUtVLGNBQWNWLEtBQUtLLElBRnhCTCxLQUFLUyxZQUFZVCxLQUFLSyxHQUd4QixJQUlGTCxLQUFLMkIsWUFBYzNCLEtBQUtlLGFBQWFsRCxjQUFjLHdCQUNuRG1DLEtBQUsyQixZQUFZSixpQkFBaUIsU0FBUyxLQUN6Q3ZCLEtBQUtRLGNBQWNSLEtBQUtlLGFBQWNmLEtBQUtLLEdBQUcsR0FNbEQsQ0FDQXVCLGdCQUFBQSxHQUNFNUIsS0FBS29CLFdBQVdDLFVBQVVRLE9BQU8sMkJBQ25DLENBQ0FDLGtCQUFBQSxHQUNFOUIsS0FBS2UsYUFBYWdCLFFBQ3BCLEVDbkVLLFNBQVNwQyxFQUFpQnFDLEdBQy9CLE1BQU1DLEVBQVFELEVBQVEvQixLQUNoQkMsRUFBTzhCLEVBQVE5QixLQUVyQmdDLEVBQWFDLEtBQUssQ0FBRUYsUUFBTy9CLFFBQzdCLENBaUNPLFNBQVNrQyxFQUFjQyxFQUFXQyxFQUFNQyxHQUMzQkQsRUFBS3pFLGNBQWMsaUJBRXpCc0QsWUFEUmtCLEVBQ3NCLFlBRUFFLENBRTVCLENDeERlLE1BQU1DLEVBQ25CaEQsV0FBQUEsQ0FBWWlELEVBQVdDLEdBQ3JCMUMsS0FBSzJDLGVBQWlCRixFQUFVL0QsY0FDaENzQixLQUFLNEMsc0JBQXdCSCxFQUFVOUQscUJBQ3ZDcUIsS0FBSzZDLHFCQUF1QkosRUFBVTdELG9CQUN0Q29CLEtBQUs4QyxpQkFBbUJMLEVBQVU1RCxnQkFDbENtQixLQUFLK0MsWUFBY04sRUFBVTNELFdBRTdCa0IsS0FBS2dELE1BQVFOLEVBRWIxQyxLQUFLaUQsZUFBaUJqRCxLQUFLZ0QsTUFBTUUsaUJBQWlCLHNCQUNsRGxELEtBQUttRCxRQUFVbkQsS0FBS2dELE1BQU1FLGlCQUFpQixlQUM3QyxDQUVBRSxjQUFBQSxDQUFlQyxFQUFjQyxHQUMzQkQsRUFBYWhDLFVBQVVDLElBQUl0QixLQUFLOEMsa0JBRWhDLE1BQU1TLEVBQWV2RCxLQUFLZ0QsTUFBTW5GLGNBQWUsSUFBR3dGLEVBQWFoRCxZQUMvRGtELEVBQWFwQyxZQUFjbUMsRUFDM0JDLEVBQWFsQyxVQUFVQyxJQUFJdEIsS0FBSytDLFlBQ2xDLENBQ0FTLGNBQUFBLENBQWVILEdBQ2JBLEVBQWFoQyxVQUFVVSxPQUFPL0IsS0FBSzhDLGtCQUVkOUMsS0FBS2dELE1BQU1uRixjQUFlLElBQUd3RixFQUFhaEQsWUFDbERnQixVQUFVVSxPQUFPL0IsS0FBSytDLFlBQ3JDLENBRUFVLGtCQUFBQSxDQUFtQkosR0FDakIsR0FBS0EsRUFBYUssU0FBU0MsTUFHcEIzRCxLQUFLd0QsZUFBZUgsT0FITyxDQUNoQyxNQUFNQyxFQUFlRCxFQUFhTyxrQkFDbEM1RCxLQUFLb0QsZUFBZUMsRUFBY0MsRUFDcEMsQ0FDRixDQUVBTyxlQUFBQSxHQUNFLE9BQU83RCxLQUFLOEQsVUFBVUMsTUFBTVYsSUFDbEJBLEVBQWFLLFNBQVNDLE9BRWxDLENBQ0FLLGlCQUFBQSxHQUNNaEUsS0FBSzZELG1CQUNQN0QsS0FBS2lFLGNBQWM1QyxVQUFVQyxJQUFJdEIsS0FBSzZDLHNCQUN0QzdDLEtBQUtpRSxjQUFjQyxhQUFhLFlBQVksS0FFNUNsRSxLQUFLaUUsY0FBYzVDLFVBQVVVLE9BQU8vQixLQUFLNkMsc0JBRXpDN0MsS0FBS2lFLGNBQWNFLGdCQUFnQixZQUV2QyxDQUVBQyxpQkFBQUEsR0FDRXBFLEtBQUs4RCxVQUFZdEMsTUFBTUMsS0FDckJ6QixLQUFLZ0QsTUFBTUUsaUJBQWlCbEQsS0FBSzJDLGlCQUVuQzNDLEtBQUtpRSxjQUFnQmpFLEtBQUtnRCxNQUFNbkYsY0FBY21DLEtBQUs0Qyx1QkFFbkQ1QyxLQUFLZ0Usb0JBRUxoRSxLQUFLOEQsVUFBVU8sU0FBU2hCLElBQ3RCckQsS0FBS3FELGFBQWVBLEVBQ3BCckQsS0FBS3FELGFBQWE5QixpQkFBaUIsU0FBUyxLQUMxQ3ZCLEtBQUt5RCxtQkFBbUJKLEdBQ3hCckQsS0FBSzZELGtCQUNMN0QsS0FBS2dFLG1CQUFtQixHQUN4QixHQUVOLENBQ0FNLGdCQUFBQSxHQUNFdEUsS0FBS2dELE1BQU16QixpQkFBaUIsVUFBV2dELElBQ3JDQSxFQUFJQyxpQkFDSnhFLEtBQUtnRSxtQkFBbUIsSUFFMUJoRSxLQUFLb0UsbUJBQ1AsQ0FFQUssVUFBQUEsR0FDRXpFLEtBQUtpRCxlQUFlb0IsU0FBU2YsSUFDM0JBLEVBQWFqQyxVQUFVVSxPQUFPLDJCQUEyQixJQUUzRC9CLEtBQUttRCxRQUFRa0IsU0FBU0ssSUFDcEJBLEVBQU1yRCxVQUFVVSxPQUFPLHlCQUF5QixHQVlwRCxDQUVBNEMsaUJBQUFBLEdBQ0UzRSxLQUFLaUUsY0FBYzVDLFVBQVVDLElBQUl0QixLQUFLNkMsc0JBQ3RDN0MsS0FBS2lFLGNBQWNDLGFBQWEsWUFBWSxFQUM5QyxFQ2xHYSxNQUFNVSxFQUNuQnBGLFdBQUFBLENBQVlxRixHQUNWN0UsS0FBSzZFLE1BQVFBLENBQ2YsQ0FDQTFDLElBQUFBLEdBQ0VuQyxLQUFLNkUsTUFBTXhELFVBQVVDLElBQUksZ0JBQ3pCMUQsU0FBUzJELGlCQUFpQixVQUFXdkIsS0FBSzhFLGdCQUM1QyxDQUNBQyxLQUFBQSxHQUNFL0UsS0FBSzZFLE1BQU14RCxVQUFVVSxPQUFPLGdCQUM1Qm5FLFNBQVNvSCxvQkFBb0IsVUFBV2hGLEtBQUs4RSxnQkFDL0MsQ0FFQUEsZ0JBQW1CUCxJQUNELFdBQVpBLEVBQUl2SCxLQUNOZ0QsS0FBSytFLE9BQ1AsRUFFRlgsaUJBQUFBLEdBQ0VwRSxLQUFLaUYsWUFBY2pGLEtBQUs2RSxNQUFNaEgsY0FBYyx3QkFDNUNtQyxLQUFLaUYsWUFBWTFELGlCQUFpQixTQUFTLEtBQ3pDdkIsS0FBSytFLE9BQU8sSUFHZC9FLEtBQUs2RSxNQUFNdEQsaUJBQWlCLGFBQWNnRCxJQUNwQ0EsRUFBSVcsU0FBV1gsRUFBSVksZUFDckJuRixLQUFLK0UsT0FDUCxHQUVKLEVDM0JLLE1BQU1LLFVBQXNCUixFQUNqQ3BGLFdBQUFBLENBQVlxRixFQUFLakYsR0FBeUQsSUFBdkQsaUJBQUV5RixFQUFnQixpQkFBRUMsRUFBZ0IsY0FBRWxELEdBQWV4QyxFQUN0RTJGLE1BQU1WLEdBQ043RSxLQUFLcUYsaUJBQW1CQSxFQUN4QnJGLEtBQUtzQyxLQUFPdEMsS0FBSzZFLE1BQU1oSCxjQUFjLFNBRXJDbUMsS0FBS3NGLGlCQUFtQkEsRUFDeEJ0RixLQUFLd0YsZUFBaUJwRCxDQUN4QixDQUNBMkMsS0FBQUEsR0FDRVEsTUFBTVIsUUFDTi9FLEtBQUtzQyxLQUFLbUQsUUFFVnpGLEtBQUtzRixrQkFDUCxDQUNBSSxlQUFBQSxHQUNFLE1BQU01QixFQUFZOUQsS0FBS3NDLEtBQUtZLGlCQUFpQixnQkFFdkN5QyxFQUFjLENBQUMsRUFDckIsSUFBSyxNQUFNakIsS0FBU1osRUFDbEI2QixFQUFZakIsRUFBTXpFLE1BQVF5RSxFQUFNa0IsTUFFbEMsT0FBT0QsQ0FDVCxDQUVBdkIsaUJBQUFBLEdBQ0VtQixNQUFNbkIsb0JBRU5wRSxLQUFLc0MsS0FBS2YsaUJBQWlCLFVBQVdnRCxJQUdwQ3ZFLEtBQUt3RixpQkFFTGpCLEVBQUlDLGlCQUVKeEUsS0FBS3FGLGlCQUFpQnJGLEtBQUswRixrQkFBa0IsR0FHakQsRUNGSyxNQUFNeEQsRUFBZSxJQ3JDckIsY0FBNkIwQyxFQUNsQ3BGLFdBQUFBLENBQVlxRyxFQUFlQyxFQUFZQyxHQUNyQ1IsTUFBTU0sR0FDTjdGLEtBQUtnRyxZQUFjRixFQUNuQjlGLEtBQUtpRyxZQUFjRixDQUNyQixDQUVBNUQsSUFBQUEsQ0FBSzFDLEdBQ0hPLEtBQUtpRyxZQUFZOUUsWUFBYzFCLEVBQUt3QyxNQUNwQ2pDLEtBQUtnRyxZQUFZL0UsSUFBTXhCLEVBQUtTLEtBQzVCRixLQUFLZ0csWUFBWTlFLElBQU8sWUFBV3pCLEVBQUt3QyxRQUN4Q3NELE1BQU1wRCxNQU9SLEdEb0JBckUsRUFDQUMsRUFDQUMsR0FFRmtFLEVBQWFrQyxvQkFFYixNQUFNOEIsRUFBYyxJRTdDYixNQUNMMUcsV0FBQUEsQ0FBWVMsRUFBTWtHLEVBQUtDLEdBQ3JCcEcsS0FBS0MsS0FBT0EsRUFDWkQsS0FBS21HLElBQU1BLEVBRVhuRyxLQUFLb0csT0FBU0EsQ0FDaEIsQ0FDQUMsV0FBQUEsR0FDRSxNQUFPLENBQ0xwRyxLQUFNRCxLQUFLQyxLQUFLa0IsWUFDaEJtRixNQUFPdEcsS0FBS21HLElBQUloRixZQUVwQixDQUNBb0YsV0FBQUEsQ0FBVzNHLEdBQTBCLElBQXpCLEtBQUVLLEVBQUksTUFBRXFHLEVBQUssT0FBRUYsR0FBUXhHLEVBQ2pDSSxLQUFLQyxLQUFLa0IsWUFBY2xCLEVBQ3hCRCxLQUFLbUcsSUFBSWhGLFlBQWNtRixFQUV2QnRHLEtBQUtvRyxPQUFPbkYsSUFBTW1GLENBQ3BCLEdGMkIrQi9ILEVBQWNDLEVBQWlCZSxHQUUxRG1ILEVBQXVCLElBQUloRSxFQUFjL0QsRUFBUU0sR0FDdkR5SCxFQUFxQmxDLG1CQUVyQixNQUFNbUMsRUFBcUIsSUFBSWpFLEVBQWMvRCxFQUFRTyxHQUNyRHlILEVBQW1CbkMsbUJBRW5CLE1BQU1vQyxFQUFzQixJQUFJbEUsRUFBYy9ELEVBQVFRLEdBQ3REeUgsRUFBb0JwQyxtQkFFcEIsTUFBTXFDLEVBQWUsSUFBSXZCLEVBQWNsSCxFQUFrQixDQUN2RG1ILGlCQUFtQi9ILElBQ2pCc0osRUFDR0MsWUFBWXZKLEdBQ1p3SixNQUFNQyxJQUNMSixFQUFhNUIsUUFDYm1CLEVBQVlLLFlBQVlRLEdBRXhCUCxFQUFxQjdCLG1CQUFtQixJQUV6Q3FDLE9BQU9DLElBQ05DLFFBQVFDLElBQUlGLEVBQUksSUFFakJHLFNBQVEsS0FDUGhGLEdBQWMsRUFBT3JELEVBQWlCLE9BQU8sR0FDN0MsRUFFTnVHLGlCQUFrQkEsS0FDaEJrQixFQUFxQi9CLFlBQVksRUFFbkNyQyxjQUFlQSxLQUNiQSxHQUFjLEVBQU1yRCxFQUFnQixJQUd4QzRILEVBQWF2QyxvQkFDYm5HLEVBQWtCc0QsaUJBQWlCLFNBQVMsTUozRXJDLFNBQXdCM0IsR0FBa0IsSUFBakIsS0FBRUssRUFBSSxNQUFFcUcsR0FBTzFHLEVBQzdDckIsRUFBVXFILE1BQVEzRixFQUNsQnpCLEVBQWlCb0gsTUFBUVUsQ0FDM0IsQ0l5RUVlLENBQWdCbkIsRUFBWUcsZUFDNUJNLEVBQWF4RSxNQUFNLElBS2QsTUFBTXlFLEVBQU0sSUd4RlosTUFDTHBILFdBQUFBLENBQVdJLEVBQXVCMEgsR0FBZSxJQUFyQyxRQUFFQyxFQUFPLFFBQUVDLEdBQVM1SCxFQUM5QkksS0FBS3lILFNBQVdGLEVBQ2hCdkgsS0FBSzBILFNBQVdGLEVBRWhCeEgsS0FBSzJILGVBQWlCTCxDQUN4QixDQUVBTSxZQUFBQSxHQUNFLE9BQU9DLE1BQU8sR0FBRTdILEtBQUt5SCxvQkFBcUIsQ0FBRUQsUUFBU3hILEtBQUswSCxXQUFZWixLQUNwRTlHLEtBQUsySCxlQUVULENBRUFHLGVBQUFBLEdBQ0UsT0FBT0QsTUFBTyxHQUFFN0gsS0FBS3lILGlCQUFrQixDQUFFRCxRQUFTeEgsS0FBSzBILFdBQVlaLEtBQ2pFOUcsS0FBSzJILGVBRVQsQ0FDQWQsV0FBQUEsQ0FBV2tCLEdBQWtCLElBQWpCLEtBQUU5SCxFQUFJLE1BQUVxRyxHQUFPeUIsRUFDekIsT0FBT0YsTUFBTyxHQUFFN0gsS0FBS3lILG9CQUFxQixDQUN4Q08sT0FBUSxRQUNSUixRQUFTeEgsS0FBSzBILFNBQ2RPLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJsSSxLQUFNQSxFQUNOcUcsTUFBT0EsTUFFUlEsS0FBSzlHLEtBQUsySCxlQUNmLENBQ0FTLFVBQUFBLENBQVVDLEdBQWlCLElBQWhCLEtBQUVwSSxFQUFJLEtBQUVDLEdBQU1tSSxFQUN2QixPQUFPUixNQUFPLEdBQUU3SCxLQUFLeUgsaUJBQWtCLENBQ3JDTyxPQUFRLE9BQ1JSLFFBQVN4SCxLQUFLMEgsU0FDZE8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQmxJLEtBQU1BLEVBQ05DLEtBQU1BLE1BRVA0RyxLQUFLOUcsS0FBSzJILGVBQ2YsQ0FFQVcsVUFBQUEsQ0FBV0MsR0FDVCxPQUFPVixNQUFPLEdBQUU3SCxLQUFLeUgsa0JBQWtCYyxJQUFVLENBQy9DUCxPQUFRLFNBQ1JSLFFBQVN4SCxLQUFLMEgsV0FDYlosS0FBSzlHLEtBQUsySCxlQUNmLENBQ0FhLE9BQUFBLENBQVFELEdBQ04sT0FBT1YsTUFBTyxHQUFFN0gsS0FBS3lILGtCQUFrQmMsVUFBZ0IsQ0FDckRQLE9BQVEsTUFDUlIsUUFBU3hILEtBQUswSCxXQUNiWixLQUFLOUcsS0FBSzJILGVBQ2YsQ0FFQWMsVUFBQUEsQ0FBV0YsR0FDVCxPQUFPVixNQUFPLEdBQUU3SCxLQUFLeUgsa0JBQWtCYyxVQUFnQixDQUNyRFAsT0FBUSxTQUNSUixRQUFTeEgsS0FBSzBILFdBQ2JaLEtBQUs5RyxLQUFLMkgsZUFDZixDQUVBZSxZQUFBQSxDQUFheEksR0FDWCxPQUFPMkgsTUFBTyxHQUFFN0gsS0FBS3lILDJCQUE0QixDQUMvQ08sT0FBUSxRQUNSUixRQUFTeEgsS0FBSzBILFNBQ2RPLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkIvQixPQUFRbEcsTUFFVDRHLEtBQUs5RyxLQUFLMkgsZUFDZixDQUVBZ0Isc0JBQUFBLEdBQ0UsTUFFTUMsRUFBVyxDQUZHNUksS0FBSzRILGVBQ1I1SCxLQUFLOEgsbUJBRXRCLE9BQU9lLFFBQVFDLElBQUlGLEVBQ3JCLEdIY0EsQ0FDRXJCLFFBQVMsa0RBQ1RDLFFBQVMsQ0FDUHVCLGNBQWUsdUNBQ2YsZUFBZ0Isc0JKbkNmLFNBQXVCQyxHQUM1QixPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOTCxRQUFRTSxPQUFRLFNBQVFILEVBQUlJLFNBQ3JDLElJb0NNQyxFQUFrQixJSW5HVCxNQUNiN0osV0FBQUEsQ0FBV0ksRUFBZTBKLEdBQVcsSUFBekIsU0FBRUMsR0FBVTNKLEVBQ3RCSSxLQUFLd0osVUFBWUQsRUFDakJ2SixLQUFLeUosV0FBYUgsQ0FDcEIsQ0FDQUksT0FBQUEsQ0FBUUMsR0FDTjNKLEtBQUt5SixXQUFXRyxRQUFRRCxFQUMxQixDQUNBRSxXQUFBQSxHQUNFN0osS0FBSzhKLE9BQU96RixTQUFTMEYsSUFDbkIvSixLQUFLd0osVUFBVU8sRUFBSyxHQUV4QixDQUNBQyxRQUFBQSxDQUFTQyxHQUNQakssS0FBSzhKLE9BQVNHLENBQ2hCLEdKcUZBLENBQ0VWLFNBQVdRLElBQ1QsTUFBTUosRUovRUwsU0FBb0JJLEdBQ3pCLE1BQU1HLEVBQU8sSUFBSTNLLEVBQUt3SyxFQUFNLGlCQUFrQnBLLEVBQWtCLENBQzlERSxhQUFjQSxDQUFDOEosRUFBYXRKLEtBQzFCOEosRUFBWWhJLE9BQ1pnSSxFQUFZQyxrQkFBa0JULEVBQWF0SixFQUFHLEVBRWhEUCxXQUFhTyxJQUNYdUcsRUFBQUEsUUFDV3ZHLEdBQ1J5RyxNQUFNQyxJQUNMbUQsRUFBS3RJLGtCQUFrQixJQUV4Qm9GLE9BQU9DLEdBQVFDLFFBQVFDLElBQUlGLElBQUssRUFFckNsSCxhQUFlTSxJQUNidUcsRUFBQUEsV0FDY3ZHLEdBQ1h5RyxNQUFNQyxJQUNMbUQsRUFBS3RJLGtCQUFrQixJQUV4Qm9GLE9BQU9DLEdBQVFDLFFBQVFDLElBQUlGLElBQUssSUFHdkMsT0FBT2lELEVBQUtwSixjQUNkLENJdUQwQnVKLENBQVdOLEdBQy9CVixFQUFnQkssUUFBUUMsRUFBWSxHQUd4Q2hNLEdBRUZpSixFQUNHK0IseUJBQ0E3QixNQUFNa0MsSUFDTDlDLEVBQVlLLFlBQVl5QyxFQUFJLElBRTVCSyxFQUFnQlcsU0FBU2hCLEVBQUksR0FBR3NCLGNBQ2hDakIsRUFBZ0JRLGFBQWEsSUFFOUI3QyxPQUFPQyxHQUFRQyxRQUFRcUQsTUFBTXRELEtBRWhDLE1BQU11RCxFQUFjLElBQUlwRixFQUN0QmpHLEVBQ0EsQ0FDRWtHLGlCQUFtQi9ILElBQ2pCc0osRUFDRzhCLGFBQWFwTCxFQUFJNEMsTUFDakI0RyxNQUFNQyxJQUNMeUQsRUFBWXpGLFFBQ1ptQixFQUFZSyxZQUFZUSxHQUV4QkwsRUFBb0IvQixtQkFBbUIsSUFFeENxQyxPQUFPQyxHQUFRQyxRQUFRcUQsTUFBTXRELEtBQzdCRyxTQUFRLEtBQ1BoRixHQUFjLEVBQU9uRCxFQUFZLE9BQU8sR0FDeEMsRUFFTnFHLGlCQUFrQkEsS0FDaEJvQixFQUFvQmpDLFlBQVksRUFFbENyQyxjQUFlQSxLQUNiQSxHQUFjLEVBQU1uRCxFQUFXLEdBR25DeUgsR0FFRjhELEVBQVlwRyxvQkFFWmhGLEVBQWlCbUMsaUJBQWlCLFNBQVMsS0FDekNpSixFQUFZckksTUFBTSxJQUdiLE1BQU1nSSxFQUFjLElLcEpwQixjQUFvQ3ZGLEVBQ3pDcEYsV0FBQUEsQ0FBWXFGLEVBQUtqRixHQUF1QyxJQUFyQyxpQkFBRXlGLEVBQWdCLGNBQUVqRCxHQUFleEMsRUFDcEQyRixNQUFNVixHQUNON0UsS0FBS3FGLGlCQUFtQkEsRUFDeEJyRixLQUFLc0MsS0FBT3RDLEtBQUs2RSxNQUFNaEgsY0FBYyxTQUVyQ21DLEtBQUt3RixlQUFpQnBELENBQ3hCLENBRUFxSSxnQkFBQUEsR0FDRWxGLE1BQU1uQixvQkFFTnBFLEtBQUtzQyxLQUFLZixpQkFBaUIsVUFBV2dELElBQ3BDQSxFQUFJQyxpQkFHSnhFLEtBQUt3RixpQkFFTHhGLEtBQUtxRixpQkFBaUJyRixLQUFLMkosWUFBYTNKLEtBQUtLLEdBQUcsR0FFcEQsQ0FFQStKLGlCQUFBQSxDQUFrQlQsRUFBYWUsR0FDN0IxSyxLQUFLMkosWUFBY0EsRUFDbkIzSixLQUFLSyxHQUFLcUssQ0FDWixHTDJIbURwTCxFQUFhLENBQ2hFK0YsaUJBQWtCQSxDQUFDc0UsRUFBYWUsS0FDOUI5RCxFQUNHMEIsV0FBV29DLEdBQ1g1RCxNQUFNQyxJQUNMNEMsRUFBWTVILFNBQ1pvSSxFQUFZcEYsT0FBTyxJQUVwQmlDLE9BQU9DLEdBQVFDLFFBQVFxRCxNQUFNdEQsS0FDN0JHLFNBQVEsS0FDUGhGLEdBQWMsRUFBT2xELEVBQVksTUFBTSxHQUN2QyxFQUVOa0QsY0FBZUEsS0FDYkEsR0FBYyxFQUFNbEQsRUFBVyxJQUduQ2lMLEVBQVlNLG1CQUVaLE1BQU1FLEVBQWEsSUFBSXZGLEVBQ3JCaEgsRUFDQSxDQUNFaUgsaUJBQW1CL0gsSUFDakJzSixFQUNHd0IsV0FBVzlLLEdBQ1h3SixNQUFNQyxJQUNMNEQsRUFBVzVGLFFBRVhzRSxFQUFnQlcsU0FBUyxDQUFDakQsSUFDMUJzQyxFQUFnQlEsY0FFaEJwRCxFQUFtQjlCLG1CQUFtQixJQUV2Q3FDLE9BQU9DLEdBQVFDLFFBQVFxRCxNQUFNdEQsS0FDN0JHLFNBQVEsS0FDUGhGLEdBQWMsRUFBT3BELEVBQWUsU0FBUyxHQUM3QyxFQUVOc0csaUJBQWtCQSxLQUNoQm1CLEVBQW1CaEMsWUFBWSxFQUVqQ3JDLGNBQWVBLEtBQ2JBLEdBQWMsRUFBTXBELEVBQWMsR0FHdEN5SCxHQUVGa0UsRUFBV3ZHLG9CQUNYakcsRUFBZW9ELGlCQUFpQixTQUFTLEtBQ3ZDb0osRUFBV3hJLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5leHBvcnQgY29uc3QgbW9kYWxDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRNb2RhbEltYWdlID0gbW9kYWxDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRNb2RhbFRpdGxlID0gbW9kYWxDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcmQtdGl0bGVcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkc0J1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBjYXJkc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkcy1tb2RhbFwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcblxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmZvcm1fX2lucHV0LWRlc2NyaXB0aW9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBjYXJkc0lucHV0VGl0bGUgPSBjYXJkc01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtdGl0bGVcIik7XG5leHBvcnQgY29uc3QgY2FyZHNJbnB1dExpbmsgPSBjYXJkc01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXQtbGlua1wiKTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzRWRpdEZvcm0gPSBjYXJkc01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZHMtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9waWNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9waWMtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtZm9ybVwiKTtcblxuZXhwb3J0IGNvbnN0IHByb3BpY01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9waWMtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvcGljQnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRcIik7XG5leHBvcnQgY29uc3QgcHJvcGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLW1vZGFsXCIpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgeyBoYW5kbGVEZWxldGUsIGhhbmRsZUxpa2UsIGhhbmRsZVVubGlrZSB9XG4gICkge1xuICAgIHRoaXMubmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLmxpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuXG4gICAgdGhpcy5pZCA9IGRhdGEuX2lkO1xuXG4gICAgdGhpcy5pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xuXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVVubGlrZSA9IGhhbmRsZVVubGlrZTtcbiAgfVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLmxpbms7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2ltYWdlXCJcbiAgICApLmFsdCA9IGBwaG90byBvZiAke3RoaXMubmFtZX1gO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG5cbiAgICBpZiAodGhpcy5pc0xpa2VkID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuYnV0dG9uTGlrZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIik7XG5cbiAgICB0aGlzLmJ1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIUFycmF5LmZyb20odGhpcy5idXR0b25MaWtlLmNsYXNzTGlzdCkuaW5jbHVkZXMoXG4gICAgICAgICAgXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSh0aGlzLmlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVVubGlrZSh0aGlzLmlkKTtcbiAgICAgIH1cblxuICAgICAgLy90aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5idXR0b25UcmFzaCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiKTtcbiAgICB0aGlzLmJ1dHRvblRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5fY2FyZEVsZW1lbnQsIHRoaXMuaWQpO1xuICAgICAgLypcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZVBvcHVwLmNhdGNoU2VsZWN0ZWRDYXJkKHRoaXMuX2NhcmRFbGVtZW50LCB0aGlzLmlkKTtcbiAgICAgICovXG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLmJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcbiAgfVxuICBfaGFuZGxlVHJhc2hCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IHsgZGVsZXRlUG9wdXAsIHByZXZpZXdQb3B1cCwgYXBpIH0gZnJvbSBcIi4uL3BhZ2VzL2luZGV4LmpzXCI7XG5cbmltcG9ydCB7IGlucHV0TmFtZSwgaW5wdXREZXNjcmlwdGlvbiB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKHsgbmFtZSwgYWJvdXQgfSkge1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gYWJvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHRoaXNPYmopIHtcbiAgY29uc3QgdGl0bGUgPSB0aGlzT2JqLm5hbWU7XG4gIGNvbnN0IGxpbmsgPSB0aGlzT2JqLmxpbms7XG5cbiAgcHJldmlld1BvcHVwLm9wZW4oeyB0aXRsZSwgbGluayB9KTtcbn1cbi8qXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cbiovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2ssIHtcbiAgICBoYW5kbGVEZWxldGU6IChjYXJkRWxlbWVudCwgaWQpID0+IHtcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZVBvcHVwLmNhdGNoU2VsZWN0ZWRDYXJkKGNhcmRFbGVtZW50LCBpZCk7XG4gICAgfSxcbiAgICBoYW5kbGVMaWtlOiAoaWQpID0+IHtcbiAgICAgIGFwaVxuICAgICAgICAuYWRkTGlrZShpZClcbiAgICAgICAgLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIH0sXG4gICAgaGFuZGxlVW5saWtlOiAoaWQpID0+IHtcbiAgICAgIGFwaVxuICAgICAgICAuZGVsZXRlTGlrZShpZClcbiAgICAgICAgLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIH0sXG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBmb3JtLCB0ZXh0KSB7XG4gIGNvbnN0IHN1YkJ1dHRvbiA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBzdWJCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICB9IGVsc2Uge1xuICAgIHN1YkJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVzcG9uc2UocmVzKSB7XG4gIGlmIChyZXMub2spIHtcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWdPYmosIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZ09iai5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnT2JqLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWdPYmouaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWdPYmouaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWdPYmouZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZXMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXQtZXJyb3JcIik7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICB9XG5cbiAgc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG4gIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgdGhpcy5zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuXG4gIGhhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLmlucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuaGFzSW52YWxpZElucHV0KCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsZWFyRXJyb3IoKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICAgIH0pO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgfSk7XG4gICAgLypcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXQtZXJyb3JcIik7XG4gICAgZXJyb3JNZXNzYWdlcy5mb3JFYWNoKChlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICAgIH0pO1xuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgfSk7XG4gICAgKi9cbiAgfVxuXG4gIHJlc2V0U3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxufVxuXG5jb25zdCBjb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgdGhpcy5wb3B1cCA9IHBvcHVwO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLmJ1dHRvbkNsb3NlID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b24tY2xvc2VcIik7XG4gICAgdGhpcy5idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHsgaGFuZGxlRm9ybVN1Ym1pdCwgaGFuZGxlQ2xlYXJFcnJvciwgcmVuZGVyTG9hZGluZyB9KSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5cbiAgICB0aGlzLmhhbmRsZUNsZWFyRXJyb3IgPSBoYW5kbGVDbGVhckVycm9yO1xuICAgIHRoaXMuX3JlbmRlckxvYWRpbmcgPSByZW5kZXJMb2FkaW5nO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5mb3JtLnJlc2V0KCk7XG5cbiAgICB0aGlzLmhhbmRsZUNsZWFyRXJyb3IoKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG5cbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRMaXN0KSB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgLy9cbiAgICAgIC8vcmVuZGVyTG9hZGluZyh0cnVlLCB0aGlzLmZvcm0pO1xuICAgICAgdGhpcy5fcmVuZGVyTG9hZGluZygpO1xuXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgLy90aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBjYXJkTGlzdCxcbiAgcHJvZmlsZUJ1dHRvbkVkaXQsXG4gIHByb2ZpbGVFZGl0TW9kYWwsXG4gIGNhcmRzQnV0dG9uQWRkLFxuICBjYXJkc01vZGFsLFxuICBjb25maWcsXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgY2FyZHNFZGl0Rm9ybSxcbiAgcHJvZmlsZVRpdGxlLFxuICBwcm9maWxlU3VidGl0bGUsXG4gIG1vZGFsQ2FyZCxcbiAgcHJvcGljRm9ybSxcbiAgcHJvcGljTW9kYWwsXG4gIHByb3BpY0J1dHRvbkVkaXQsXG4gIHByb3BpYyxcbiAgZGVsZXRlTW9kYWwsXG4gIGRlbGV0ZUZvcm0sXG4gIGNhcmRNb2RhbEltYWdlLFxuICBjYXJkTW9kYWxUaXRsZSxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlQ2FyZCxcbiAgZmlsbFByb2ZpbGVGb3JtLFxuICByZW5kZXJMb2FkaW5nLFxuICBjaGVja1Jlc3BvbnNlLFxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbi8vXG5leHBvcnQgY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFxuICBtb2RhbENhcmQsXG4gIGNhcmRNb2RhbEltYWdlLFxuICBjYXJkTW9kYWxUaXRsZVxuKTtcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVTdWJ0aXRsZSwgcHJvcGljKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGNhcmRzRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZHNFZGl0Rm9ybSk7XG5jYXJkc0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9waWNGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9waWNGb3JtKTtcbnByb3BpY0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlRWRpdE1vZGFsLCB7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChvYmopID0+IHtcbiAgICBhcGlcbiAgICAgIC5lZGl0UHJvZmlsZShvYmopXG4gICAgICAudGhlbigocikgPT4ge1xuICAgICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8ocik7XG5cbiAgICAgICAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRTdWJtaXRCdXR0b24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcHJvZmlsZUVkaXRGb3JtLCBcIlNhdmVcIik7XG4gICAgICB9KTtcbiAgfSxcbiAgaGFuZGxlQ2xlYXJFcnJvcjogKCkgPT4ge1xuICAgIHByb2ZpbGVGb3JtVmFsaWRhdG9yLmNsZWFyRXJyb3IoKTtcbiAgfSxcbiAgcmVuZGVyTG9hZGluZzogKCkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvZmlsZUVkaXRGb3JtKTtcbiAgfSxcbn0pO1xucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmaWxsUHJvZmlsZUZvcm0ocHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKSk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuLy9cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoXG4gIHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCJmMDEyNjRlOC0yMTAxLTRhYjctYjEyMC1iMDliNTVlNjM2ODFcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH0sXG4gIH0sXG4gIGNoZWNrUmVzcG9uc2Vcbik7XG5cbmNvbnN0IG5ld0NhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBuZXdDYXJkc1NlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY2FyZExpc3Rcbik7XG5hcGlcbiAgLnJldHVyblVzZXJJbmZvQW5kQ2FyZHMoKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8ocmVzWzBdKTtcblxuICAgIG5ld0NhcmRzU2VjdGlvbi5zZXRJdGVtcyhyZXNbMV0udG9SZXZlcnNlZCgpKTtcbiAgICBuZXdDYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG5cbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHByb3BpY01vZGFsLFxuICB7XG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKG9iaikgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC51cGRhdGVQcm9QaWMob2JqLmxpbmspXG4gICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgYXZhdGFyUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhyKTtcblxuICAgICAgICAgIHByb3BpY0Zvcm1WYWxpZGF0b3IucmVzZXRTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHByb3BpY0Zvcm0sIFwiU2F2ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVDbGVhckVycm9yOiAoKSA9PiB7XG4gICAgICBwcm9waWNGb3JtVmFsaWRhdG9yLmNsZWFyRXJyb3IoKTtcbiAgICB9LFxuICAgIHJlbmRlckxvYWRpbmc6ICgpID0+IHtcbiAgICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvcGljRm9ybSk7XG4gICAgfSxcbiAgfSxcbiAgcHJvcGljRm9ybVZhbGlkYXRvclxuKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb3BpY0J1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oZGVsZXRlTW9kYWwsIHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGNhcmRFbGVtZW50LCBvYmpJZCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQob2JqSWQpXG4gICAgICAudGhlbigocikgPT4ge1xuICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBkZWxldGVGb3JtLCBcIlllc1wiKTtcbiAgICAgIH0pO1xuICB9LFxuICByZW5kZXJMb2FkaW5nOiAoKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBkZWxldGVGb3JtKTtcbiAgfSxcbn0pO1xuZGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcigpO1xuXG5jb25zdCBjYXJkc1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIGNhcmRzTW9kYWwsXG4gIHtcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAob2JqKSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLmFkZE5ld0NhcmQob2JqKVxuICAgICAgICAudGhlbigocikgPT4ge1xuICAgICAgICAgIGNhcmRzUG9wdXAuY2xvc2UoKTtcblxuICAgICAgICAgIG5ld0NhcmRzU2VjdGlvbi5zZXRJdGVtcyhbcl0pO1xuICAgICAgICAgIG5ld0NhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4gICAgICAgICAgY2FyZHNGb3JtVmFsaWRhdG9yLnJlc2V0U3VibWl0QnV0dG9uKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBjYXJkc0VkaXRGb3JtLCBcIkNyZWF0ZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVDbGVhckVycm9yOiAoKSA9PiB7XG4gICAgICBjYXJkc0Zvcm1WYWxpZGF0b3IuY2xlYXJFcnJvcigpO1xuICAgIH0sXG4gICAgcmVuZGVyTG9hZGluZzogKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyh0cnVlLCBjYXJkc0VkaXRGb3JtKTtcbiAgICB9LFxuICB9LFxuICBjYXJkc0Zvcm1WYWxpZGF0b3Jcbik7XG5jYXJkc1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jYXJkc0J1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjYXJkc1BvcHVwLm9wZW4oKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIG1vZGFsSW1hZ2UsIG1vZGFsVGl0bGUpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gbW9kYWxJbWFnZTtcbiAgICB0aGlzLl9tb2RhbFRpdGxlID0gbW9kYWxUaXRsZTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX21vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gYHBob3RvIG9mICR7ZGF0YS50aXRsZX1gO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICAvKlxuICAgIGNhcmRNb2RhbFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcbiAgICBjYXJkTW9kYWxJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgY2FyZE1vZGFsSW1hZ2UuYWx0ID0gYHBob3RvIG9mICR7ZGF0YS50aXRsZX1gO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICAqL1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lLCBqb2IsIGF2YXRhcikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG5cbiAgICB0aGlzLmF2YXRhciA9IGF2YXRhcjtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuam9iLnRleHRDb250ZW50ID0gYWJvdXQ7XG5cbiAgICB0aGlzLmF2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSwgY2hlY2tSZXNwb25zZSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuXG4gICAgdGhpcy5fY2hlY2tSZXNwb25zZSA9IGNoZWNrUmVzcG9uc2U7XG4gIH1cblxuICBsb2FkVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXG4gICAgKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2VcbiAgICApO1xuICB9XG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZVByb1BpYyhsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHJldHVyblVzZXJJbmZvQW5kQ2FyZHMoKSB7XG4gICAgY29uc3QgcHJvZmlsZUluZm8gPSB0aGlzLmxvYWRVc2VySW5mbygpO1xuICAgIGNvbnN0IGNhcmRJbmZvID0gdGhpcy5nZXRJbml0aWFsQ2FyZHMoKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtwcm9maWxlSW5mbywgY2FyZEluZm9dO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG4gIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbiAgc2V0SXRlbXMoaXRlbXMpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICB9XG59XG5cbi8qZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgdGhpcy5faXRlbXMgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICB9XG4gIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiovXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHsgaGFuZGxlRm9ybVN1Ym1pdCwgcmVuZGVyTG9hZGluZyB9KSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5cbiAgICB0aGlzLl9yZW5kZXJMb2FkaW5nID0gcmVuZGVyTG9hZGluZztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAvL3JlbmRlckxvYWRpbmcodHJ1ZSwgdGhpcy5mb3JtKTtcbiAgICAgIHRoaXMuX3JlbmRlckxvYWRpbmcoKTtcblxuICAgICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0KHRoaXMuY2FyZEVsZW1lbnQsIHRoaXMuaWQpO1xuICAgIH0pO1xuICB9XG5cbiAgY2F0Y2hTZWxlY3RlZENhcmQoY2FyZEVsZW1lbnQsIG9iaklkKSB7XG4gICAgdGhpcy5jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xuICAgIHRoaXMuaWQgPSBvYmpJZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY2FyZExpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtb2RhbENhcmQiLCJjYXJkTW9kYWxJbWFnZSIsImNhcmRNb2RhbFRpdGxlIiwicHJvZmlsZUJ1dHRvbkVkaXQiLCJwcm9maWxlRWRpdE1vZGFsIiwiY2FyZHNCdXR0b25BZGQiLCJjYXJkc01vZGFsIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZVN1YnRpdGxlIiwiaW5wdXROYW1lIiwiaW5wdXREZXNjcmlwdGlvbiIsImNvbmZpZyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUVkaXRGb3JtIiwiY2FyZHNFZGl0Rm9ybSIsInByb3BpY0Zvcm0iLCJkZWxldGVGb3JtIiwicHJvcGljTW9kYWwiLCJwcm9waWNCdXR0b25FZGl0IiwicHJvcGljIiwiZGVsZXRlTW9kYWwiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9yZWYiLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVMaWtlIiwiaGFuZGxlVW5saWtlIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiaWQiLCJfaWQiLCJpc0xpa2VkIiwiX2hhbmRsZURlbGV0ZSIsIl9oYW5kbGVMaWtlIiwiX2hhbmRsZVVubGlrZSIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImJ1dHRvbkxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyYXkiLCJmcm9tIiwiaW5jbHVkZXMiLCJidXR0b25UcmFzaCIsImhhbmRsZUxpa2VCdXR0b24iLCJ0b2dnbGUiLCJfaGFuZGxlVHJhc2hCdXR0b24iLCJyZW1vdmUiLCJ0aGlzT2JqIiwidGl0bGUiLCJwcmV2aWV3UG9wdXAiLCJvcGVuIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImZvcm0iLCJ0ZXh0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZ09iaiIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2Vycm9yTWVzc2FnZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0cyIsInNob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaGlkZUlucHV0RXJyb3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJoYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJidXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2xlYXJFcnJvciIsImlucHV0IiwicmVzZXRTdWJtaXRCdXR0b24iLCJQb3B1cCIsInBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnV0dG9uQ2xvc2UiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVDbGVhckVycm9yIiwic3VwZXIiLCJfcmVuZGVyTG9hZGluZyIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInBvcHVwU2VsZWN0b3IiLCJtb2RhbEltYWdlIiwibW9kYWxUaXRsZSIsIl9tb2RhbEltYWdlIiwiX21vZGFsVGl0bGUiLCJwcm9maWxlSW5mbyIsImpvYiIsImF2YXRhciIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZHNGb3JtVmFsaWRhdG9yIiwicHJvcGljRm9ybVZhbGlkYXRvciIsInByb2ZpbGVQb3B1cCIsImFwaSIsImVkaXRQcm9maWxlIiwidGhlbiIsInIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwiZmlsbFByb2ZpbGVGb3JtIiwiY2hlY2tSZXNwb25zZSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwibG9hZFVzZXJJbmZvIiwiZmV0Y2giLCJnZXRJbml0aWFsQ2FyZHMiLCJfcmVmMiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTmV3Q2FyZCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwidXBkYXRlUHJvUGljIiwicmV0dXJuVXNlckluZm9BbmRDYXJkcyIsInByb21pc2VzIiwiUHJvbWlzZSIsImFsbCIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJuZXdDYXJkc1NlY3Rpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiY2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJfaXRlbXMiLCJpdGVtIiwic2V0SXRlbXMiLCJpdGVtcyIsImNhcmQiLCJkZWxldGVQb3B1cCIsImNhdGNoU2VsZWN0ZWRDYXJkIiwiY3JlYXRlQ2FyZCIsInRvUmV2ZXJzZWQiLCJlcnJvciIsImF2YXRhclBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lciIsIm9iaklkIiwiY2FyZHNQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=